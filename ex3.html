<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Exerc√≠cio 1</title>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/2.0.0/aframe/build/aframe-ar.js"></script>
</head>
<body style='margin : 0px; overflow: hidden;'>
<script>
    AFRAME.registerComponent('sistema-solar', {
        init: function(){
            let countX = 3;
            let planetas = [], sol;
            let pai = document.createElement('a-entity');
            let sceneEl = document.querySelector('a-scene');
            sol = document.createElement('a-entity'); // create the element
            sol.setAttribute('id', 'Sol');
            sol.setAttribute('geometry', {
                primitive: 'sphere',
                radius: 3
            });
            sol.setAttribute('material', 'src: https://cdn.glitch.com/09f144ac-16f9-4495-b36a-f83ac4acf496%2F2k_sun.jpg?v=1569918424501; shader: flat');
            sol.setAttribute('position', '0 0 0');
            sol.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; easing: linear; dur: '+ getRandomIntInclusive(1000, 100000));
            pai.appendChild(sol);

            //planetas
            let src = [];
            src[0] = 'https://cdn.glitch.com/09f144ac-16f9-4495-b36a-f83ac4acf496%2F2k_neptune.jpg?v=1569918426186';
            src[1] = 'https://cdn.glitch.com/09f144ac-16f9-4495-b36a-f83ac4acf496%2Fjupitermap.jpg?v=1569917117994';
            src[2] = 'https://cdn.glitch.com/09f144ac-16f9-4495-b36a-f83ac4acf496%2Fearthmap1k.jpg?v=1569917119132';
            var posicaox =0;
            var posicaoz =0;
            for (let i=0; i<countX; i++){
                planetas[i] = document.createElement('a-entity'); // create the element
                var scala = getRandomIntInclusive(1, 3);
                planetas[i].setAttribute('id', 'planeta_'+ i.toString());
                planetas[i].setAttribute('geometry', {
                    primitive: 'sphere',
                    radius: scala
                });
                posicaox += 5 + getRandomIntInclusive(1, 5);
                posicaoz += 5 + getRandomIntInclusive(1, 5);

                planetas[i].setAttribute('material', 'src: '+ src[i]);
                planetas[i].setAttribute('position', posicaox.toString() +' 0' +' '+ posicaoz.toString());
                planetas[i].setAttribute('shadow', '' );
                planetas[i].setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; easing: linear; dur: '+ getRandomIntInclusive(1000, 100000));
                let paiplaneta = document.createElement('a-entity');
                paiplaneta.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; easing: linear; dur: '+ getRandomIntInclusive(1000, 100000));
                pai.appendChild(paiplaneta);
                paiplaneta.appendChild(planetas[i]);
            }
            sceneEl.appendChild(pai);
            let camera = document.querySelector('#camerapositionvrmode')
            camera.setAttribute('position', (posicaox.toString()) +' 10' +' '+ posicaoz.toString());
            camera.setAttribute('rotation', '0 45 0');
        }
    });

    function getRandomIntInclusive(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
</script>

    <a-scene embedded arjs>
        <a-marker preset="hiro">
            <!--sun-->
            <a-sphere color="#FFFF00" position="0 10 0" radius="5.00" animation="property: rotation;to: 0 360 0; loop: true; dur: 5000; easing: linear;" material="" geometry="">
                <!--mercury-->
                <a-sphere src="https://cdn.glitch.com/0beb0675-8510-4f64-9ee3-a1701ee7a41e%2FMercuryforaframeproject.jpg?1553980514799" position="8 5 0" radius="1.00" attribute="rotation" dur="1000" fill="forwards" to="0 360 0" easing="linear" material="" geometry=""></a-sphere>
            </a-sphere>
            <a-sphere color="#FFFF00" position="0 10 0" radius="5.00" animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear;" material="" geometry="">
                <!--venus-->
                <a-sphere src="https://cdn.glitch.com/0beb0675-8510-4f64-9ee3-a1701ee7a41e%2Fvenusaframeproject.jpg?1553981077751" position="16 5 0" radius="1.50" attribute="rotation" dur="1000" fill="forwards" to="0 360 0" material="" geometry=""></a-sphere>
            </a-sphere>
            <a-sphere color="#FFFF00" position="0 -10 0" radius="5.00" animation="property: rotation; to: 0 360 0; loop: true; dur: 50000; easing: linear;" material="" geometry="">
                <!--mars-->
                <a-sphere src="https://cdn.glitch.com/0beb0675-8510-4f64-9ee3-a1701ee7a41e%2Fmarsaframe.jpg?1553981744681" position="32 5 0" radius="1.75" attribute="rotation" dur="1000" fill="forwards" to="0 360 0" material="" geometry=""></a-sphere>
            </a-sphere>
        </a-marker>
    </a-scene>

</body>
</html>
